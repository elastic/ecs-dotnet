---
name: Bootstrap Checkout
description: Ensures an action that needs to build has access to git tags

runs:
  using: "composite"
  steps:
    # Checkout with fetch 1 for performance
    - uses: actions/checkout@v3
      with:
        fetch-depth: 1
    # Ensure we fetch all tags
    - shell: bash
      run: |
        git fetch --prune --unshallow --tags
        git tag --list
          
    # Install .NET version as mandated by global.json
    - uses: actions/setup-dotnet@v1
      with:
          global-json-file: global.json
      
    # Setup git config
    - uses: elastic/apm-pipeline-library/.github/actions/setup-git@current